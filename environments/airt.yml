# a python environment including CUDA capability

name: spectrum-sensor-edge-analysis

channels:
  # - pytorch
  - nvidia
  - conda-forge
  - file://opt/deepwave/conda-channels/airstack-conda

dependencies:
  # python3.9 is the most recent supported by our jetson board
  - python=3.9
  - pip
  - jupyter
  - numba
  - scipy>=1.9.2
  - seaborn>=0.12
  - numpy>=1.21
  - matplotlib-base>=3.7
  - numexpr>=2.7
  - scikit-learn>=1.1,<2.0
  - ruff
  - msgspec
  - pyppeteer
  - ipympl
  - numexpr>=2.8.4
  - humanfriendly
  - xarray
  - netCDF4
  - cython
  - soapysdr-module-airt
  - pip:
      - iqwaveform @ git+https://github.com/dgkuester/iqwaveform
      - https://archive.deepwavedigital.com/pycuda/pycuda-2020.1-cp39-cp39-linux_aarch64.whl
      - https://archive.deepwavedigital.com/pytools/pytools-2022.1.12-py2.py3-none-any.whl
      - --extra-index-url https://pip.cupy.dev/aarch64
      - cupy-cuda102
      
      # the conda pytorch package doesn't seem to play nice with the above
      # cupy-cuda102
      # - --extra-index-url https://download.pytorch.org/whl/cu102
        #      - pytorch==1.12.0+cu102

      # allows imports from the src/ directory from anywhere in the environment 
      - -e ..
