# This is here to allow an editable install of modules in src/ toshare code between notebooks

[project]
name = "flex-spectrum-sensor"
version = "0.0"
description = "exploring the analysis of IQ in aggregate waveforms"
authors = [
    {name = "Dan Kuester", email = "daniel.kuester@nist.gov"},
]
requires-python = "~=3.9.0"

# TODO: SoapySDR doesn't exist as a pypi dependency
# dependencies = [
#  "numba",
#  "scipy>=1.9.2",
#  "seaborn>=0.12",
#  "numpy>=1.21,<2",
#   "matplotlib>=3.7",
#   "scikit-learn>=1.1,<2.0",
#   "pyppeteer",
#   "ipympl",
#   "numexpr>=2.8.4",
#   "humanfriendly",
#   "array-api-compat",
#   "methodtools",
#   "labbench",
#   "rpyc",
#   "xarray",
#   "zarr",
#   "dask",
#   "msgspec",
#   "frozendict",
#   "dulwich",
#   "ruamel.yaml",
#   "xarray_dataclasses",
#   "typing-extensions",
#   "setuptools",
#   "iqwaveform @ git+https://github.com/usnistgov/iqwaveform"
# ]

[project.optional-dependencies]
dev = ["ipykernel", "jupyter", "ruff"]

[project.scripts]
edge-sensor-sweep = "flex_spectrum_sensor_scripts.edge_sensor_sweep:run"
edge-sensor-server = "flex_spectrum_sensor_scripts.edge_sensor_server:run"

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["linux-64", "linux-aarch64", "osx-arm64", "osx-64", "win-64"]

[tool.pixi.system-requirements]
linux = "4.9"
libc = { family="glibc", version="2.27" }

[tool.pixi.pypi-dependencies]
flex_spectrum_sensor = { path = ".", editable = true }

[tool.pixi.dependencies]
# bring in these dependencies from conda to take advantage of hardware drivers
labbench = "*"
soapysdr = "*"

[tool.pixi.feature.dev.dependencies]

[tool.pixi.feature.cuda.target.win-64.dependencies]
cupy = "*"
cython = "*"

[tool.pixi.feature.cuda.target.win-64.host-dependencies]
cuda = "12"

[tool.pixi.feature.cuda.target.linux-64.dependencies]
cupy = "*"
cython = "*"

[tool.pixi.feature.cuda.target.linux-64.host-dependencies]
cuda = "12"

[tool.pixi.environments]
dev = ["dev"]
cuda = ["cuda"]
all = ["dev","cuda"]

[tool.ruff]
target-version = "py39"
extend-include = ["*.ipynb"]
line-length = 88

[tool.ruff.format]
quote-style = "single"
line-ending = "lf"
docstring-code-format = true
docstring-code-line-length = "dynamic"

[tool.ruff.lint]

[tool.ruff.lint.extend-per-file-ignores]
"**/__init__.py" = ["F401", "F403", "E402"]